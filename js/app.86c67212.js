(function(e){function t(t){for(var a,r,i=t[0],u=t[1],o=t[2],f=0,v=[];f<i.length;f++)r=i[f],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&v.push(n[r][0]),n[r]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);c&&c(t);while(v.length)v.shift()();return s.push.apply(s,o||[]),l()}function l(){for(var e,t=0;t<s.length;t++){for(var l=s[t],a=!0,i=1;i<l.length;i++){var u=l[i];0!==n[u]&&(a=!1)}a&&(s.splice(t--,1),e=r(r.s=l[0]))}return e}var a={},n={app:0},s=[];function r(t){if(a[t])return a[t].exports;var l=a[t]={i:t,l:!1,exports:{}};return e[t].call(l.exports,l,l.exports,r),l.l=!0,l.exports}r.m=e,r.c=a,r.d=function(e,t,l){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(r.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(l,a,function(t){return e[t]}.bind(null,a));return l},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var o=0;o<i.length;o++)t(i[o]);var c=u;s.push([0,"chunk-vendors"]),l()})({0:function(e,t,l){e.exports=l("56d7")},4333:function(e){e.exports=JSON.parse('{"en":{"lblSelectDataType":"Select data..","lblSelectYear":"Select year..","lblSelectQuarter":"Select quarter..","lblSelectColorSchema":"Select color schema.."},"lv":{"lblSelectDataType":"Izvēlies datus..","lblSelectYear":"Izvēlies gadu..","lblSelectQuarter":"Izvēlies ceturksni..","lblSelectColorSchema":"Izvēlies krāsu shēmu.."}}')},"4dee":function(e){e.exports=JSON.parse('[{"colors":[{"value":"#7f0000","isActive":true,"min":null,"max":null},{"value":"#b30000","isActive":false,"min":null,"max":null},{"value":"#d7301f","isActive":false,"min":null,"max":null},{"value":"#ef6548","isActive":false,"min":null,"max":null},{"value":"#fc8d59","isActive":false,"min":null,"max":null},{"value":"#fdbb84","isActive":false,"min":null,"max":null},{"value":"#fdd49e","isActive":false,"min":null,"max":null},{"value":"#fee8c8","isActive":false,"min":null,"max":null},{"value":"#fff7ec","isActive":true,"min":null,"max":null}],"selected":true,"name":"RedYellow","textEng":"Red - yellow","textLat":"Sarkans - dzeltens"},{"colors":[{"value":"#00441b","isActive":true,"min":null,"max":null},{"value":"#006d2c","isActive":false,"min":null,"max":null},{"value":"#238b45","isActive":false,"min":null,"max":null},{"value":"#41ae76","isActive":false,"min":null,"max":null},{"value":"#66c2a4","isActive":false,"min":null,"max":null},{"value":"#99d8c9","isActive":false,"min":null,"max":null},{"value":"#ccece6","isActive":false,"min":null,"max":null},{"value":"#e5f5f9","isActive":false,"min":null,"max":null},{"value":"#f7fcfd","isActive":true,"min":null,"max":null}],"selected":false,"name":"GreenWhite","textEng":"Green - white","textLat":"Zaļš - balts"},{"colors":[{"value":"#000000","isActive":true,"min":null,"max":null},{"value":"#252525","isActive":false,"min":null,"max":null},{"value":"#525252","isActive":false,"min":null,"max":null},{"value":"#737373","isActive":false,"min":null,"max":null},{"value":"#969696","isActive":false,"min":null,"max":null},{"value":"#bdbdbd","isActive":false,"min":null,"max":null},{"value":"#d9d9d9","isActive":false,"min":null,"max":null},{"value":"#f0f0f0","isActive":false,"min":null,"max":null},{"value":"#ffffff","isActive":true,"min":null,"max":null}],"selected":false,"name":"BlackWhite","textEng":"Black - white","textLat":"Melns - balts"},{"colors":[{"value":"#662506","isActive":true,"min":null,"max":null},{"value":"#993404","isActive":false,"min":null,"max":null},{"value":"#cc4c02","isActive":false,"min":null,"max":null},{"value":"#ec7014","isActive":false,"min":null,"max":null},{"value":"#fe9929","isActive":false,"min":null,"max":null},{"value":"#fec44f","isActive":false,"min":null,"max":null},{"value":"#fee391","isActive":false,"min":null,"max":null},{"value":"#fff7bc","isActive":false,"min":null,"max":null},{"value":"#ffffe5","isActive":true,"min":null,"max":null}],"selected":false,"name":"BrownYellow","textEng":"Brown - yellow","textLat":"Brūns - dzeltens"},{"colors":[{"value":"#1a9850","isActive":true,"min":null,"max":null},{"value":"#66bd63","isActive":false,"min":null,"max":null},{"value":"#a6d96a","isActive":false,"min":null,"max":null},{"value":"#d9ef8b","isActive":false,"min":null,"max":null},{"value":"#ffffbf","isActive":false,"min":null,"max":null},{"value":"#fee08b","isActive":false,"min":null,"max":null},{"value":"#fdae61","isActive":false,"min":null,"max":null},{"value":"#f46d43","isActive":false,"min":null,"max":null},{"value":"#d73027","isActive":true,"min":null,"max":null}],"selected":false,"name":"GreenRed","textEng":"Green - red","textLat":"Zaļš - sarkans"}]')},"56d7":function(e,t,l){"use strict";l.r(t);var a=l("2b0e"),n=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app"},[e.error?l("div",{staticClass:"error-panel"},[e._v(e._s(e.error))]):e._e(),e.loading?l("div",{staticClass:"loading-indicator"},[e._m(0)]):e._e(),e.initialLoadComplete?l("div",[l("Filters"),l("Stage"),l("div",{attrs:{id:"map"}},[l("span",{domProps:{innerHTML:e._s(e.svg)}})])],1):e._e(),e._m(1)])},s=[function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"sk-folding-cube"},[l("div",{staticClass:"sk-cube1 sk-cube"}),l("div",{staticClass:"sk-cube2 sk-cube"}),l("div",{staticClass:"sk-cube4 sk-cube"}),l("div",{staticClass:"sk-cube3 sk-cube"})])},function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{attrs:{id:"version"}},[e._v("\n        Datu avots - "),l("a",{attrs:{href:"https://www.csb.gov.lv/"}},[e._v("Centrālā statistikas pārvalde")]),e._v(" Mapio v0.1.1\n    ")])}],r=l("bc3a"),i=l.n(r),u=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{attrs:{id:"data-select"}},[l("div",{staticClass:"select-menu"},[l("multiselect",{attrs:{options:e.dataTypes,"allow-empty":!1,"show-labels":!1,placeholder:e.$t("lblSelectDataType"),label:e.getLabelSource()},model:{value:e.filter.dataType,callback:function(t){e.$set(e.filter,"dataType",t)},expression:"filter.dataType"}})],1),l("div",{staticClass:"select-menu"},[l("multiselect",{attrs:{"allow-empty":!1,"show-labels":!1,placeholder:e.$t("lblSelectYear"),options:e.years},model:{value:e.filter.year,callback:function(t){e.$set(e.filter,"year",t)},expression:"filter.year"}})],1),l("div",{directives:[{name:"show",rawName:"v-show",value:e.filter.dataType&&e.filter.dataType.IsQuarterly,expression:"filter.dataType && filter.dataType.IsQuarterly"}],staticClass:"select-menu"},[l("multiselect",{attrs:{"allow-empty":!1,"show-labels":!1,placeholder:e.$t("lblSelectQuarter"),options:e.quarters},model:{value:e.filter.quarter,callback:function(t){e.$set(e.filter,"quarter",t)},expression:"filter.quarter"}})],1)])},o=[];let c={buildQuery(e,t,l){const a={Query:[],Response:{Format:"json"}};return e.QuerySections.forEach(n=>{const s=[];switch(n){case"Teritoriālā vienība":case"Administratīvā teritorija":for(var r in v)s.push(r);break;case"Gads":s.push(t);break;case"Gads/Ceturksnis":s.push(`${t}${l}`);break;default:s.push(...e.QueryValues[e.QuerySections.indexOf(n)]);break}const i={Code:n,Selection:{Filter:"item",Values:s}};a.Query.push(i)}),a}};var f=c;const v={LV0010000:0,LV0050000:1,LV0090000:2,LV0110000:3,LV0130000:4,LV0170000:5,LV0210000:6,LV0250000:7,LV0270000:8,LV0604300:9,LV0320200:10,LV0640600:11,LV0560800:12,LV0661000:13,LV0624200:14,LV0360200:15,LV0424701:16,LV0360800:17,LV0460800:18,LV0804400:19,LV0804900:20,LV0800600:21,LV0384400:22,LV0380200:23,LV0400200:24,LV0964700:25,LV0840601:26,LV0967101:27,LV0805200:28,LV0700800:29,LV0420200:30,LV0684901:31,LV0601000:32,LV0440200:33,LV0460200:34,LV0885100:35,LV0640801:36,LV0905100:37,LV0705500:38,LV0806000:39,LV0641000:40,LV0500200:41,LV0406400:42,LV0740600:43,LV0440801:44,LV0801800:45,LV0321000:46,LV0425700:47,LV0905700:48,LV0540200:49,LV0560200:50,LV0901201:51,LV0681000:52,LV0960200:53,LV0326100:54,LV0600202:55,LV0806900:56,LV0566900:57,LV0620200:58,LV0741001:59,LV0800800:60,LV0741401:61,LV0660200:62,LV0421200:63,LV0761201:64,LV0701400:65,LV0680200:66,LV0700200:67,LV0961000:68,LV0807400:69,LV0807600:70,LV0887600:71,LV0967300:72,LV0327100:73,LV0647900:74,LV0740202:75,LV0801000:76,LV0546701:77,LV0427500:78,LV0641401:79,LV0321400:80,LV0760202:81,LV0641600:82,LV0427300:83,LV0427700:84,LV0780200:85,LV0766300:86,LV0888301:87,LV0808400:88,LV0648500:89,LV0387500:90,LV0407700:91,LV0961600:92,LV0661400:93,LV0568700:94,LV0801200:95,LV0840200:96,LV0801400:97,LV0809200:98,LV0801601:99,LV0328200:100,LV0621200:101,LV0941600:102,LV0809600:103,LV0941800:104,LV0880200:105,LV0468900:106,LV0900200:107,LV0649300:108,LV0940200:109,LV0701800:110,LV0769101:111,LV0429300:112,LV0409500:113,LV0980200:114,LV0561800:115,LV0381600:116,LV0781800:117,LV0681801:118};var d=l("8e5f"),m=l.n(d),h=l("2f62"),L={name:"filters",components:{multiselect:m.a},data(){return{dataTypes:[],years:[],quarters:[],filter:{dataType:null,year:null,quarter:null}}},watch:{filter:{deep:!0,handler(){this.datasetChanged(this.filter.dataType),this.loadData()}}},methods:{...Object(h["c"])(["setData","setError","setLoading"]),...Object(h["b"])(["getBaseUri"]),datasetChanged(e){this.years=e.Years?e.Years:[],this.quarters=e.Quarters?e.Quarters:[],this.years.includes(this.filter.year)||(this.filter.year=null,this.setData(null)),e.IsQuarterly&&(0===this.years.indexOf(this.filter.year)?this.quarters=e.FirstYearQuarters:this.years.indexOf(this.filter.year)===this.years.length-1&&(this.quarters=e.LastYearQuarters)),this.quarters.includes(this.filter.quarter)||(this.filter.quarter=null,this.setData(null))},loadData:function(){if(!this.isDataSetSelected())return;const e=f.buildQuery(this.filter.dataType,this.filter.year,this.filter.quarter),t=`https://data1.csb.gov.lv/api/v1/lv/${this.filter.dataType.Uri}`;let l=[];i.a.post(t,e).then(e=>{e.data.data.forEach(e=>{l.push({name:e.key.find(e=>e.startsWith("LV")),value:e.values[0]})}),l=l.sort((e,t)=>t.value-e.value),this.setData(l)}).catch(e=>{this.setError(e)})},isDataSetSelected:function(){return this.filter.dataType&&this.filter.year&&(this.filter.quarter||!this.filter.dataType.IsQuarterly)},getLabelSource:function(){return"lv"===this.language?"TextLat":"TextEng"}},mounted(){const e=`${document.URL}datasettings.json`;i.a.get(e).then(e=>{this.dataTypes=e.data.DataSetConfigurations}).catch(e=>{this.setError(e)})},computed:Object(h["d"])(["language"])},p=L,V=l("2877"),b=Object(V["a"])(p,u,o,!1,null,null,null),x=b.exports,g=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{attrs:{id:"map-options"}},[l("div",{staticClass:"color-select"},[l("multiselect",{attrs:{options:e.colorSets,"allow-empty":!1,"show-labels":!1,placeholder:e.$t("lblSelectColorSchema"),label:e.getLabelSource()},on:{input:function(t){return e.changeColorSet()}},model:{value:e.currentColorSetSelector,callback:function(t){e.currentColorSetSelector=t},expression:"currentColorSetSelector"}})],1)]),l("div",{attrs:{id:"color-options"}},e._l(e.currentColorSet.colors,(function(t){return l("div",{key:t.value,staticClass:"color-entry"},[l("div",{staticClass:"color-tile",style:e.bindStyle("background-color",t.value),on:{click:function(l){return e.toggleColor(t.value,!t.isActive)}}}),l("p",{staticClass:"color-range"},[e._v(e._s(e.getDataRangeText(t)))])])})),0)])},y=[],S=l("4378"),A=l("4dee"),C={name:"stage",components:{multiselect:m.a},data(){return{colorSets:[],currentColorSet:null,currentColorSetSelector:null}},watch:{data:function(){this.setMapState()}},methods:{bindStyle:function(e,t){return`${e}: ${t};`},setMapState:function(){if(this.currentColorSet.colors.forEach(e=>{e.min=null,e.max=null}),!this.data)return;const e=this.currentColorSet.colors.filter(e=>e.isActive),t=e.length,l=this.data.length,a=Math.floor(l/t),n=new Array(t).fill(a);let s=0;while(n.reduce((e,t)=>e+t,0)<l)n[s]++,s++>=n.length&&(s=0);let r=0;this.data.forEach(t=>{1===n[r]&&(this.currentColorSet.colors.find(t=>t.value===e[r].value).min=t.value),0===n[r]&&(r++,this.currentColorSet.colors.find(t=>t.value===e[r].value).max=t.value),n[r]--,this.setCountyColor(t.name,e[r].value)})},setCountyColor:function(e,t){S["a"](`.${e}`).fill(t)},toggleColor:function(e,t){this.currentColorSet.colors.find(t=>t.value===e).isActive=t,this.setMapState()},getDataRangeText:function(e){return!e.isActive||null===e.min&&null===e.max?"":null===e.max?`>= ${e.min}`:null===e.min?`${e.max} <=`:`${e.min} ... ${e.max}`},changeColorSet:function(){const e=[...this.currentColorSet.colors];this.currentColorSet=this.colorSets.find(e=>e.name===this.currentColorSetSelector.name),this.currentColorSet.colors.forEach((t,l)=>{const a=e[l];t.min=a.min,t.max=a.max,t.isActive=a.isActive}),this.setMapState()},getLabelSource:function(){return"lv"===this.language?"textLat":"textEng"}},created(){this.colorSets=A,this.currentColorSet=this.colorSets.find(e=>e.selected),this.currentColorSetSelector=this.currentColorSet},computed:Object(h["d"])(["data","language"])},w=C,k=Object(V["a"])(w,g,y,!1,null,null,null),_=k.exports,T={name:"mapio",components:{Filters:x,Stage:_},data(){return{svg:null,initialLoadComplete:!1}},methods:{...Object(h["c"])(["setError","setLanguage","setLoading"]),...Object(h["b"])(["getBaseUri"])},watch:{error:function(e){null!==e&&setTimeout(()=>this.setError(null),1e4)}},mounted(){const e=`${document.URL}basemap.svg`;i.a.get(e).then(e=>{this.svg=e.data,this.initialLoadComplete=!0,this.setLoading(!1)}).catch(e=>{this.setError(e)})},computed:{...Object(h["d"])(["error","loading"])}},O=T,$=Object(V["a"])(O,n,s,!1,null,null,null),E=$.exports,j=l("aa40"),Q=l.n(j);a["a"].use(h["a"]);const D=new h["a"].Store({state:{data:null,error:null,language:"lv",loading:!0},getters:{getBaseUri:()=>{const e=window.location.href;return e.includes("localhost")?"http://localhost:50514/":window.location.href}},mutations:{setData:(e,t)=>{e.data=t},setError:(e,t)=>{e.error=t},setLanguage:(e,t)=>{Q.a.locale=t,e.language=t},setLoading:(e,t)=>{e.loading=t}},actions:{}});var q=l("a925"),M=l("4333");a["a"].use(q["a"]);const Y=new q["a"]({locale:"lv",fallbackLocale:"en",messages:M});a["a"].config.productionTip=!1,new a["a"]({store:D,i18n:Y,render:e=>e(E)}).$mount("#mapio")}});
//# sourceMappingURL=app.86c67212.js.map