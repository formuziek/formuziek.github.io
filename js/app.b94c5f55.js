(function(){var e={1134:function(e,t,l){"use strict";var a=l(144),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app"},[e.error?t("div",{staticClass:"error-panel"},[e._v(e._s(e.error))]):e._e(),e.loading?t("div",{staticClass:"loading-indicator"},[e._m(0)]):e._e(),e.initialLoadComplete?t("div",[t("Filters",{on:{loadBasemap:e.loadBasemap}}),t("Stage",{ref:"stageRef"}),t("div",{attrs:{id:"map"}},[t("span",{attrs:{id:"map-data"},domProps:{innerHTML:e._s(e.svg)}})])],1):e._e(),t("div",{attrs:{id:"version"}},[t("span",{staticClass:"material-icons md-36",on:{click:e.toggleInfo}},[e._v("info")]),e.showInfo?t("div",{attrs:{id:"version-expanded"}},[e._v(" Datu avots - "),t("a",{attrs:{href:"https://www.csb.gov.lv/"}},[e._v("Centrālā statistikas pārvalde")]),e._v(" Mapio v0.2.0 ")]):e._e()])])},s=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"sk-folding-cube"},[t("div",{staticClass:"sk-cube1 sk-cube"}),t("div",{staticClass:"sk-cube2 sk-cube"}),t("div",{staticClass:"sk-cube4 sk-cube"}),t("div",{staticClass:"sk-cube3 sk-cube"})])}],i=l(5500),o=l(9669),r=l.n(o),u=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"data-select"}},[t("div",{staticClass:"select-menu"},[t("multiselect",{attrs:{options:e.versions,"allow-empty":!1,"show-labels":!1,placeholder:e.$t("lblSelectVersion"),label:"Text"},model:{value:e.version,callback:function(t){e.version=t},expression:"version"}},[[t("span",{attrs:{slot:"noResult"},slot:"noResult"},[e._v(e._s(e.$t("lblNoVersion")))])]],2)],1),t("div",{staticClass:"select-menu"},[t("multiselect",{attrs:{options:e.dataTypes,"allow-empty":!1,"show-labels":!1,placeholder:e.$t("lblSelectDataType"),label:"Text"},model:{value:e.dataType,callback:function(t){e.dataType=t},expression:"dataType"}},[[t("span",{attrs:{slot:"noResult"},slot:"noResult"},[e._v(e._s(e.$t("lblNoDataType")))])]],2)],1),e._l(e.publicVariables,(function(l){return t("div",{staticClass:"select-menu"},[t("multiselect",{attrs:{options:l.ValueItems,"allow-empty":!1,"show-labels":!1,placeholder:l.Text,label:"Text","track-by":"Value"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"variable.value"}})],1)}))],2)},c=[];const v={BEFORE_2021_ATR:"BEFORE_2021_ATR",AFTER_2021_ATR:"AFTER_2021_ATR"},d={LV0010000:0,LV0050000:1,LV0090000:2,LV0110000:3,LV0130000:4,LV0170000:5,LV0210000:6,LV0250000:7,LV0270000:8,LV0604300:9,LV0320200:10,LV0640600:11,LV0560800:12,LV0661000:13,LV0624200:14,LV0360200:15,LV0424701:16,LV0360800:17,LV0460800:18,LV0804400:19,LV0804900:20,LV0800600:21,LV0384400:22,LV0380200:23,LV0400200:24,LV0964700:25,LV0840601:26,LV0967101:27,LV0805200:28,LV0700800:29,LV0420200:30,LV0684901:31,LV0601000:32,LV0440200:33,LV0460200:34,LV0885100:35,LV0640801:36,LV0905100:37,LV0705500:38,LV0806000:39,LV0641000:40,LV0500200:41,LV0406400:42,LV0740600:43,LV0440801:44,LV0801800:45,LV0321000:46,LV0425700:47,LV0905700:48,LV0540200:49,LV0560200:50,LV0901201:51,LV0681000:52,LV0960200:53,LV0326100:54,LV0600202:55,LV0806900:56,LV0566900:57,LV0620200:58,LV0741001:59,LV0800800:60,LV0741401:61,LV0660200:62,LV0421200:63,LV0761201:64,LV0701400:65,LV0680200:66,LV0700200:67,LV0961000:68,LV0807400:69,LV0807600:70,LV0887600:71,LV0967300:72,LV0327100:73,LV0647900:74,LV0740202:75,LV0801000:76,LV0546701:77,LV0427500:78,LV0641401:79,LV0321400:80,LV0760202:81,LV0641600:82,LV0427300:83,LV0427700:84,LV0780200:85,LV0766300:86,LV0888301:87,LV0808400:88,LV0648500:89,LV0387500:90,LV0407700:91,LV0961600:92,LV0661400:93,LV0568700:94,LV0801200:95,LV0840200:96,LV0801400:97,LV0809200:98,LV0801601:99,LV0328200:100,LV0621200:101,LV0941600:102,LV0809600:103,LV0941800:104,LV0880200:105,LV0468900:106,LV0900200:107,LV0649300:108,LV0940200:109,LV0701800:110,LV0769101:111,LV0429300:112,LV0409500:113,LV0980200:114,LV0561800:115,LV0381600:116,LV0781800:117,LV0681801:118},m={LV0001000:0,LV0002000:1,LV0003000:2,LV0004000:3,LV0005000:4,LV0006000:5,LV0007000:6,LV0020000:7,LV0021000:8,LV0022000:9,LV0023000:10,LV0024000:11,LV0025000:12,LV0026000:13,LV0027000:14,LV0028000:15,LV0029000:16,LV0030000:17,LV0031000:18,LV0032000:19,LV0033000:20,LV0034000:21,LV0035000:22,LV0036000:23,LV0037000:24,LV0038000:25,LV0039000:26,LV0040000:27,LV0041000:28,LV0042000:29,LV0043000:30,LV0044000:31,LV0045000:32,LV0046000:33,LV0047000:34,LV0048000:35,LV0049000:36,LV0051000:37,LV0052000:38,LV0053000:39,LV0054000:40,LV0055000:41,LV0056000:42};let f={buildQuery(e,t){const l={Query:[],Response:{Format:"json"}};for(let n=0;n<t.Variables.length;n++){const s=t.Variables[n],i=[];switch(s.Code){case"AREA":if(e===v.AFTER_2021_ATR)for(var a in m)i.push(a);else if(e===v.BEFORE_2021_ATR)for(var a in d)i.push(a);break;case"ContentsCode":i.push(s.ValueItems[0].Value);break;default:i.push(s.value.Value);break}const o={Code:s.Code,Selection:{Filter:"item",Values:i}};l.Query.push(o)}return l}};var L=f,V=l(7907),h=l.n(V),p=l(629),b={name:"filters",components:{multiselect:h()},data(){return{allDataTypes:[],versions:[{code:v.AFTER_2021_ATR,Text:"Pēc 2021.07 reformas"},{code:v.BEFORE_2021_ATR,Text:"Līdz 2021.07 reformai"}],dataTypes:[],version:{},dataType:null,publicVariables:[]}},watch:{dataType:{deep:!0,handler(){this.dataType&&(this.publicVariables=this.dataType.Variables.filter((e=>"AREA"!==e.Code&&"ContentsCode"!==e.Code)),this.dataType.Variables.every((e=>"AREA"===e.Code||"ContentsCode"===e.Code||e.value))&&this.loadData())}},version:{handler(){let e="";e=this.version.code===v.BEFORE_2021_ATR?"basemap":"basemap-2021",this.dataTypes=this.allDataTypes.filter((e=>e.Version===this.version.code)),this.dataType=null,this.publicVariables=[],this.$emit("loadBasemap",e)}}},methods:{...(0,p.OI)(["setData","setError","setLoading","setDataTitle"]),...(0,p.Se)(["getBaseUri"]),loadData:function(){const e=L.buildQuery(this.version.code,this.dataType),t=`https://data.stat.gov.lv:443/api/v1/lv/OSP_PUB${this.dataType.Uri}`;let l=[];r().post(t,e).then((e=>{e.data.data.forEach((e=>{l.push({name:e.key.find((e=>e.startsWith("LV"))),value:isNaN(e.values[0])?0:e.values[0]})})),l=l.sort(((e,t)=>t.value-e.value)),this.setData(l)})).catch((e=>{this.setError(e)}))}},mounted(){const e=`${document.URL}datasettings.json`;r().get(e).then((e=>{this.allDataTypes=e.data,this.version=this.versions[0]})).catch((e=>{this.setError(e)}))},computed:(0,p.rn)(["language"])},g=b,x=l(1001),A=(0,x.Z)(g,u,c,!1,null,null,null),S=A.exports,C=function(){var e=this,t=e._self._c;return t("div",[t("div",{attrs:{id:"map-options"}},[t("div",{staticClass:"color-select"},[t("multiselect",{attrs:{options:e.colorSets,"allow-empty":!1,"show-labels":!1,placeholder:e.$t("lblSelectColorSchema"),label:e.getLabelSource()},on:{input:function(t){return e.changeColorSet()}},model:{value:e.currentColorSetSelector,callback:function(t){e.currentColorSetSelector=t},expression:"currentColorSetSelector"}},[[t("span",{attrs:{slot:"noResult"},slot:"noResult"},[e._v(e._s(e.$t("lblNoColorSchema")))])]],2)],1)]),t("div",{attrs:{id:"color-options"}},e._l(e.currentColorSet.colors,(function(l){return t("div",{key:l.value,staticClass:"color-entry"},[t("div",{staticClass:"color-tile",class:{active:l.isActive},style:e.bindStyle("background-color",l.value),on:{click:function(t){return e.toggleColor(l.value,!l.isActive)}}}),t("p",{staticClass:"color-range"},[e._v(e._s(e.getDataRangeText(l)))])])})),0)])},y=[],T=JSON.parse('[{"colors":[{"value":"#7f0000","isActive":true,"min":null,"max":null},{"value":"#b30000","isActive":false,"min":null,"max":null},{"value":"#d7301f","isActive":false,"min":null,"max":null},{"value":"#ef6548","isActive":false,"min":null,"max":null},{"value":"#fc8d59","isActive":false,"min":null,"max":null},{"value":"#fdbb84","isActive":false,"min":null,"max":null},{"value":"#fdd49e","isActive":false,"min":null,"max":null},{"value":"#fee8c8","isActive":false,"min":null,"max":null},{"value":"#fff7ec","isActive":true,"min":null,"max":null}],"selected":true,"name":"RedYellow","textEng":"Red - yellow","textLat":"Sarkans - dzeltens"},{"colors":[{"value":"#00441b","isActive":true,"min":null,"max":null},{"value":"#006d2c","isActive":false,"min":null,"max":null},{"value":"#238b45","isActive":false,"min":null,"max":null},{"value":"#41ae76","isActive":false,"min":null,"max":null},{"value":"#66c2a4","isActive":false,"min":null,"max":null},{"value":"#99d8c9","isActive":false,"min":null,"max":null},{"value":"#ccece6","isActive":false,"min":null,"max":null},{"value":"#e5f5f9","isActive":false,"min":null,"max":null},{"value":"#f7fcfd","isActive":true,"min":null,"max":null}],"selected":false,"name":"GreenWhite","textEng":"Green - white","textLat":"Zaļš - balts"},{"colors":[{"value":"#000000","isActive":true,"min":null,"max":null},{"value":"#252525","isActive":false,"min":null,"max":null},{"value":"#525252","isActive":false,"min":null,"max":null},{"value":"#737373","isActive":false,"min":null,"max":null},{"value":"#969696","isActive":false,"min":null,"max":null},{"value":"#bdbdbd","isActive":false,"min":null,"max":null},{"value":"#d9d9d9","isActive":false,"min":null,"max":null},{"value":"#f0f0f0","isActive":false,"min":null,"max":null},{"value":"#ffffff","isActive":true,"min":null,"max":null}],"selected":false,"name":"BlackWhite","textEng":"Black - white","textLat":"Melns - balts"},{"colors":[{"value":"#662506","isActive":true,"min":null,"max":null},{"value":"#993404","isActive":false,"min":null,"max":null},{"value":"#cc4c02","isActive":false,"min":null,"max":null},{"value":"#ec7014","isActive":false,"min":null,"max":null},{"value":"#fe9929","isActive":false,"min":null,"max":null},{"value":"#fec44f","isActive":false,"min":null,"max":null},{"value":"#fee391","isActive":false,"min":null,"max":null},{"value":"#fff7bc","isActive":false,"min":null,"max":null},{"value":"#ffffe5","isActive":true,"min":null,"max":null}],"selected":false,"name":"BrownYellow","textEng":"Brown - yellow","textLat":"Brūns - dzeltens"},{"colors":[{"value":"#1a9850","isActive":true,"min":null,"max":null},{"value":"#66bd63","isActive":false,"min":null,"max":null},{"value":"#a6d96a","isActive":false,"min":null,"max":null},{"value":"#d9ef8b","isActive":false,"min":null,"max":null},{"value":"#ffffbf","isActive":false,"min":null,"max":null},{"value":"#fee08b","isActive":false,"min":null,"max":null},{"value":"#fdae61","isActive":false,"min":null,"max":null},{"value":"#f46d43","isActive":false,"min":null,"max":null},{"value":"#d73027","isActive":true,"min":null,"max":null}],"selected":false,"name":"GreenRed","textEng":"Green - red","textLat":"Zaļš - sarkans"}]'),_={name:"stage",components:{multiselect:h()},data(){return{colorSets:[],currentColorSet:null,currentColorSetSelector:null}},watch:{data:function(){this.setMapState()}},methods:{bindStyle:function(e,t){return`${e}: ${t};`},setMapState:function(){if(this.currentColorSet.colors.forEach((e=>{e.min=null,e.max=null})),!this.data)return;const e=this.currentColorSet.colors.filter((e=>e.isActive)),t=e.length,l=this.data.length,a=Math.floor(l/t),n=new Array(t).fill(a);let s=0;while(n.reduce(((e,t)=>e+t),0)<l)n[s]++,s++>=n.length&&(s=0);let i=0;this.data.forEach((t=>{1===n[i]&&(this.currentColorSet.colors.find((t=>t.value===e[i].value)).min=t.value),0===n[i]&&(i++,this.currentColorSet.colors.find((t=>t.value===e[i].value)).max=t.value),n[i]--,this.setCountyColor(t.name,e[i].value)})),this.setTitle(this.dataTitle)},setCountyColor:function(e,t){i.sE(`.${e}`).fill(t)},setTitle:function(e){},toggleColor:function(e,t){this.currentColorSet.colors.find((t=>t.value===e)).isActive=t,this.setMapState()},getDataRangeText:function(e){return!e.isActive||null===e.min&&null===e.max?"":null===e.max?`>= ${e.min}`:null===e.min?`${e.max} <=`:`${e.min} ... ${e.max}`},changeColorSet:function(){const e=[...this.currentColorSet.colors];this.currentColorSet=this.colorSets.find((e=>e.name===this.currentColorSetSelector.name)),this.currentColorSet.colors.forEach(((t,l)=>{const a=e[l];t.min=a.min,t.max=a.max,t.isActive=a.isActive})),this.setMapState()},getLabelSource:function(){return"lv"===this.language?"textLat":"textEng"}},created(){this.colorSets=T,this.currentColorSet=this.colorSets.find((e=>e.selected)),this.currentColorSetSelector=this.currentColorSet},computed:(0,p.rn)(["data","dataTitle","language"])},w=_,R=(0,x.Z)(w,C,y,!1,null,null,null),E=R.exports,k={name:"mapio",components:{Filters:S,Stage:E},data(){return{svg:null,initialLoadComplete:!1,showInfo:!1}},methods:{...(0,p.OI)(["setError","setLanguage","setLoading"]),...(0,p.Se)(["getBaseUri"]),toggleInfo(){this.showInfo=!this.showInfo},download(){const e=document.getElementById("map-data").firstElementChild,t=e.getAttribute("height"),l=e.getAttribute("width");e.setAttribute("height","1000pt"),e.setAttribute("width","1700pt");const a=new Blob([e.outerHTML],{type:"application/octet-stream"}),n=URL.createObjectURL(a),s=document.createElement("a");s.style.display="none",s.href=n,s.download="mapio.svg",document.body.appendChild(s),s.click(),URL.revokeObjectURL(n),e.setAttribute("height",t),e.setAttribute("width",l)},loadBasemap(e){const t=`${document.URL}${e}.svg`;r().get(t).then((e=>{this.svg=e.data,this.initialLoadComplete=!0,this.setLoading(!1)})).catch((e=>{this.setError(e)}))}},watch:{error:function(e){null!==e&&setTimeout((()=>this.setError(null)),1e4)}},mounted(){this.loadBasemap("basemap-2021")},computed:{...(0,p.rn)(["error","loading"])}},O=k,B=(0,x.Z)(O,n,s,!1,null,null,null),$=B.exports,D=l(7228),j=l.n(D);a.ZP.use(p.ZP);const F=new p.ZP.Store({state:{data:null,error:null,language:"lv",loading:!0,dataTitle:null},getters:{getBaseUri:()=>{const e=window.location.href;return e.includes("localhost")?"http://localhost:50514/":window.location.href}},mutations:{setData:(e,t)=>{e.data=t},setError:(e,t)=>{e.error=t},setLanguage:(e,t)=>{j().locale=t,e.language=t},setLoading:(e,t)=>{e.loading=t},setDataTitle:(e,t)=>{e.dataTitle=t}},actions:{}});var I=l(7152),P=JSON.parse('{"en":{"lblSelectVersion":"Select version..","lblSelectDataType":"Select data..","lblSelectColorSchema":"Select color schema..","lblNoVersion":"Such version is not available!","lblNoDataType":"Such data is not available!","lblNoColorSchema":"Such color schema is not available!"},"lv":{"lblSelectVersion":"Izvēlies versiju..","lblSelectDataType":"Izvēlies datus..","lblSelectColorSchema":"Izvēlies krāsu shēmu..","lblNoVersion":"Šāda versija nav atrodama!","lblNoDataType":"Šādi dati nav atrodami!","lblNoColorSchema":"Šāda krāsu shēma nav pieejama!"}}');a.ZP.use(I.Z);const N=new I.Z({locale:"lv",fallbackLocale:"en",messages:P});a.ZP.config.productionTip=!1,new a.ZP({store:F,i18n:N,render:e=>e($)}).$mount("#mapio")},4709:function(){},689:function(){},1731:function(){}},t={};function l(a){var n=t[a];if(void 0!==n)return n.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,l),s.exports}l.m=e,function(){var e=[];l.O=function(t,a,n,s){if(!a){var i=1/0;for(c=0;c<e.length;c++){a=e[c][0],n=e[c][1],s=e[c][2];for(var o=!0,r=0;r<a.length;r++)(!1&s||i>=s)&&Object.keys(l.O).every((function(e){return l.O[e](a[r])}))?a.splice(r--,1):(o=!1,s<i&&(i=s));if(o){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[a,n,s]}}(),function(){l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,{a:t}),t}}(),function(){l.d=function(e,t){for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};l.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,s,i=a[0],o=a[1],r=a[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(n in o)l.o(o,n)&&(l.m[n]=o[n]);if(r)var c=r(l)}for(t&&t(a);u<i.length;u++)s=i[u],l.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return l.O(c)},a=self["webpackChunkmapio"]=self["webpackChunkmapio"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=l.O(void 0,[998],(function(){return l(1134)}));a=l.O(a)})();
//# sourceMappingURL=app.b94c5f55.js.map